# 数据提取问题排查

## 常见问题

### 提取结果为空

**可能原因：**
1. 未配置提取规则
2. 正则表达式不匹配
3. 锚点关键词不存在
4. OCR 识别质量差

**排查步骤：**
1. 查看"合并文本"确认 OCR 结果
2. 检查提取规则是否保存
3. 测试正则表达式是否匹配

### 锚点定位返回 null

**常见原因：** OCR 识别的文本与配置的锚点不一致

**示例：**
- 配置锚点：`Attn:`
- OCR 结果：`Attn :` （冒号前有空格）

**解决方案：**

1. 调整锚点关键词：
```
锚点关键词：Attn（不包含冒号）
```

2. 使用正则表达式：
```regex
Attn\s*:\s*([A-Za-z\s]+)
```

### 提取内容不完整

**常见原因：**
1. 结束标记设置错误（`/n` 应为 `\n`）
2. 提取范围不够
3. OCR 将文本分成多个框

**解决方案：**
1. 修正结束标记为 `\n`
2. 增加提取范围（如 150 字符）
3. 使用关键词作为结束标记（如 `Invoice`）

### 提取到多余内容

**解决方案：**
1. 设置结束标记
2. 减小提取范围
3. 使用更精确的正则表达式

## 配置优化建议

### 结束标记设置

| 标记 | 说明 |
|------|------|
| `\n` | 换行符（单行内容） |
| `\t` | 制表符（表格数据） |
| 关键词 | 如 `Invoice`、`Total` |

### 提取范围建议

| 场景 | 建议范围 |
|------|---------|
| 短文本（编号） | 20-50 字符 |
| 中等文本（名称） | 50-100 字符 |
| 长文本（地址） | 100-200 字符 |

### 常见错误

| 错误 | 正确 |
|------|------|
| `/n` | `\n` |
| 范围 1000 | 范围 50-150 |
| `Messrs: ` | `Messrs:` |
| `.+` | `.+?` |

## 最佳实践

1. **优先使用正则表达式**：更精确、更可靠
2. **设置合理的提取范围**：避免提取过多内容
3. **使用结束标记**：精确控制提取边界
4. **查看合并文本**：了解实际的 OCR 结果
5. **逐步测试**：每次修改后都要测试验证
