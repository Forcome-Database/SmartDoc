# ============================================
# 智能文档处理中台 - 环境变量配置
# Enterprise IDP Platform - Environment Variables
# ============================================

# ============================================
# 数据库配置 (MySQL 8.0)
# ============================================
MYSQL_ROOT_PASSWORD=root_password_change_me
MYSQL_DATABASE=idp_platform
MYSQL_USER=idp_user
MYSQL_PASSWORD=idp_password_change_me

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ============================================
# Redis 缓存配置
# ============================================
REDIS_PASSWORD=redis_password_change_me
REDIS_URL=redis://:redis_password_change_me@redis:6379/0
REDIS_MAX_CONNECTIONS=50

# ============================================
# RabbitMQ 消息队列配置
# ============================================
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=rabbitmq_password_change_me

# ============================================
# MinIO 对象存储配置
# ============================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minio_password_change_me
MINIO_BUCKET=idp-files
MINIO_SECURE=false

# ============================================
# 应用安全配置
# ============================================
# JWT 密钥（至少 32 字符）
SECRET_KEY=your-secret-key-change-in-production-min-32-chars-long

# AES-256 加密密钥（32 字节）
ENCRYPTION_KEY=your-encryption-key-here-32-bytes-long-change-me

# JWT 算法
ALGORITHM=HS256

# Token 过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================
# 运行环境配置
# ============================================
# 环境：development / production
ENVIRONMENT=development

# 日志级别：debug / info / warning / error
LOG_LEVEL=info

# 调试模式（仅开发环境）
DEBUG=false

# ============================================
# OCR 引擎配置
# ============================================
# OCR 处理超时时间（秒）
OCR_TIMEOUT=300

# 最大并行 OCR 任务数
OCR_MAX_PARALLEL=4

# ============================================
# LLM 服务配置（OpenAI兼容协议）
# ============================================
# LLM API Base URL（支持OpenAI兼容的任何服务）
LLM_BASE_URL=https://api.openai.com/v1

# LLM API Key
LLM_API_KEY=your_api_key_here

# LLM 模型名称
LLM_MODEL=gpt-3.5-turbo

# LLM 请求超时时间（秒）
LLM_TIMEOUT=60

# LLM Token 单价（用于成本估算，元/token）
LLM_TOKEN_PRICE=0.002

# LLM 最大Token数
LLM_MAX_TOKENS=4000

# LLM 代理地址（可选，如需要访问外网）
# LLM_PROXY=http://127.0.0.1:7890

# ============================================
# UmiOCR 配置（通过 Docker 部署的 HTTP 服务）
# ============================================
# UmiOCR 服务地址（Docker 内部使用 http://umiocr:1224）
UMIOCR_ENDPOINT=http://localhost:1224

# UmiOCR 请求超时时间（秒）
UMIOCR_TIMEOUT=60

# ============================================
# 数据生命周期配置
# ============================================
# 原始文件留存期（天）
FILE_RETENTION_DAYS=30

# 提取数据留存期（天，0 表示永久保留）
DATA_RETENTION_DAYS=0

# ============================================
# API 限流配置
# ============================================
# 上传接口限流（次/分钟）
RATE_LIMIT_UPLOAD=100

# 查询接口限流（次/分钟）
RATE_LIMIT_QUERY=1000

# ============================================
# 熔断器配置
# ============================================
# LLM 服务熔断阈值（连续失败次数）
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# 熔断恢复超时时间（秒）
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=300

# ============================================
# 推送重试配置
# ============================================
# 最大重试次数
PUSH_MAX_RETRIES=3

# 重试延迟（秒）：10, 30, 90
PUSH_RETRY_DELAYS=10,30,90
